---
title: 阿里云服务器踩过的坑
date: 2018-09-07 12:29:33
tags: 阿里云
categories: 阿里云
comments: true
---

初次购买，一定要好好看相关介绍，相关文档；否则后期会出现不必要的问题，最后找客服都解决不了。最后只能重新购买！
<!---more--->
**一、**购买服务器时需要注意几处：网络和安全组中的网络、安全组、公网宽带；系统配置的登陆凭证，密钥对、自定义密码、创建后重置。

初次购买会有默认的网络、安全组。默认的专有网络，不支持修改私网 IP ，购买时选择默认的网络配置，同一个地区很可能分配到同一个网段。如果你后期需要把自己购买的服务器与他人购买的服务器连接，会发现网段冲突的问题。

购买的时候尽量选择重新自建专有网络！

1、新建好专有网络有，安全组也要新建，它们是配套的。新建安全组时，直接按照它的提示新建就可以了。

2、如果选择了自己新建的专有网络组，一定要注意看公网宽带的选项，记得要勾上。
{% asset_img 15362926040606.jpg 0 %}

3、系统配置中，如下图：
{% asset_img 15362926548127.jpg 1 %}

选择密钥对登陆的方式安全性最高，设置的时候也相对复杂。通常都是选择自定义密码的方式登陆，简单快速，安全性也就比密钥对差一些。如果不知道自己怎么选择，可以选择创建后再设置。


**二、**云服务器之间私网可以相互连通很重要。具体验证的办法就是，用 `ping` 的命令，从一台服务器去 `ping` 另外一台云服务器中的私网。

通常来说，同一个账号购买的云服务器，选择的是同一个地区而且还是同一个网络专有组。这种情况下，购买的云服务器的私网都是可以相互通信的。

不同账号、不同地域的云服务器之间私网是无法通信的，还有一些同一个账户，不同地域下的云服务器私网之间也是无法通信的。这种情况下，可以去看他们的稳定。阿里云有提供相关解决方案。

解决思路是：设置安全组，或者用 VPC 的方式去解决。

不同的账户，不同的地域，不同安全组的云服务器内网想要通信，只能够选择 VPC 的解决方案。具体可看下方链接文章：

阿里云ECS同区域不同账户之间通信配置：https://blog.csdn.net/caozhanweicaiyuli/article/details/79254276

跨账号VPC互连：https://www.alibabacloud.com/help/zh/doc-detail/44842.htm?spm=a2c63.p38356.b99.15.5d4f28c9EnfNKr

高速通道实现多VPC内网互联：https://yq.aliyun.com/articles/368813#

关于阿里云不同vpc下的内网互通：https://blog.csdn.net/ymybxx/article/details/78324493

VPC通信常见问题：https://help.aliyun.com/knowledge_detail/54486.html?spm=a2c4g.11186623.6.729.29f57d73NEB9F5

注意：不同的账户，不同的地域，不同安全组的云服务器使用 VPC 解决私网 IP 相互通信问题的前提是，他们的专有网络网段不在同一个！不会出现相互冲突的问题，如果有服务器之间的网段在同一个，会导致网段冲突。从而导致 VPC 的方案无法解决。

**三、**网段冲突的问题可以有方法解决的的，可以通过更改私网 IP 网段；前提是该云服务器用的是自己新建的专有网络组。如果你用的是系统默认的专有网络，私网 IP 的网段就无法修改，阿里云的客服是这么回复的。

**四、**购买阿里云服务器之前需要了解的概念，重点！如果不先了解，之后遇到问题就会不知道怎么去排查。需要提前了解：云服务器的操作系统、对应的硬件配置（内存、cpu、硬盘等）、网络宽带计费、网络组（专有网络、经典网络、私有网络区别）、安全组。

一个程序只需要多台服务器，这种情况下程序出现问题大多数是程序的问题。如果一个程序需要多台云服务器相互配合，且出现连接上的问题时；这种情况下问题多数处在云服务器之间的相互连接上，可以先从云服务器的安全组配置、云服务器网络配置、防火墙这些方面去查找。
